---
name: smoke-tests

templates:
  run.erb: bin/run
  test_app/app.py.erb: test_app/app.py
  test_app/requirements.txt: test_app/requirements.txt
  test_app/manifest.yml.erb: test_app/manifest.yml
  test_app/Procfile: test_app/Procfile

packages:
  - cf-cli
  - smoke-tests-vendor

properties:
  cf.api_url:
    description: "Cloud Foundry API URL"
  cf.admin_username:
    description: "Cloud Foundry admin username"
  cf.admin_password:
    description: "Cloud Foundry admin password"
  cf.skip_ssl_validation:
    description: "Skip SSL validation for CF CLI"
    default: true
  cf.org:
    description: "CF organization for smoke test"
    default: "seaweedfs-smoke-test-org"
  cf.space:
    description: "CF space for smoke test"
    default: "smoke-test-space"

  smoke_tests.service_name:
    description: "Name of the SeaweedFS service to test"
    default: "seaweedfs"
  smoke_tests.plan_name:
    description: "Service plan to test"
    default: "shared"
  smoke_tests.timeout_minutes:
    description: "Timeout in minutes for the smoke test"
    default: 10
  smoke_tests.cleanup:
    description: "Whether to clean up resources after test"
    default: true
  smoke_tests.app_domain:
    description: "Apps domain for the test app"
    default: ""

  smoke_tests.test_on_demand:
    description: "Whether to also test an on-demand dedicated plan after the shared plan test"
    default: false
  smoke_tests.on_demand_plan_name:
    description: "Name of the on-demand plan to test (must match a configured plan name)"
    default: ""
  smoke_tests.on_demand_timeout_minutes:
    description: "Timeout in minutes for on-demand service creation (BOSH deployments take 15-30+ minutes)"
    default: 30
  smoke_tests.on_demand_deprovision_timeout_minutes:
    description: "Timeout in minutes for on-demand service deletion"
    default: 20
