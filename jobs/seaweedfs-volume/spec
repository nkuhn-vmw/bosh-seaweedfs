---
name: seaweedfs-volume
packages:
  - seaweedfs
templates:
  bpm.yml.erb: config/bpm.yml
  ctl.erb: bin/ctl
  pre-start.erb: bin/pre-start
  health_check.erb: bin/health_check
  ca.pem.erb: config/certs/ca.pem
  cert.pem.erb: config/certs/cert.pem
  key.pem.erb: config/certs/key.pem

consumes:
  - name: seaweedfs-master
    type: seaweedfs-master
    optional: true

properties:
  seaweedfs.volume.port:
    description: "Port for volume server"
    default: 8080
  seaweedfs.volume.port_grpc:
    description: "gRPC port for volume server"
    default: 18080
  seaweedfs.volume.master:
    description: "Master server address(es), comma-separated"
    default: "localhost:9333"
  seaweedfs.volume.max_volumes:
    description: "Maximum number of volumes"
    default: 100
  seaweedfs.volume.data_center:
    description: "Data center name for this volume server"
    default: ""
  seaweedfs.volume.rack:
    description: "Rack name for this volume server"
    default: ""
  seaweedfs.volume.metrics_port:
    description: "Metrics port for Prometheus"
    default: 9325
  seaweedfs.volume.ip_bind:
    description: "IP address to bind to"
    default: "0.0.0.0"
  seaweedfs.volume.public_url:
    description: "Public URL for volume server (for external access)"
    default: ""
  seaweedfs.volume.compaction_mb_per_second:
    description: "Compaction speed limit in MB/s"
    default: 0
  seaweedfs.volume.read_mode:
    description: "Read mode: proxy or redirect"
    default: "proxy"
  tls.ca:
    description: "CA certificate for mTLS"
    default: ""
  tls.certificate:
    description: "Server certificate"
    default: ""
  tls.private_key:
    description: "Server private key"
    default: ""
  nats.tls.ca_cert:
    description: "NATS server CA certificate. When set and route_registrar is co-located, this is written to the route_registrar config directory for TLS verification."
    default: ""
